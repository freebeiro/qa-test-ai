/*! For license information please see content.bundle.js.LICENSE.txt */
(()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(){"use strict";e=function(){return r};var n,r={},o=Object.prototype,i=o.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function d(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(n){d=function(t,e,n){return t[e]=n}}function f(t,e,n,r){var o=e&&e.prototype instanceof b?e:b,i=Object.create(o.prototype),c=new A(r||[]);return a(i,"_invoke",{value:_(t,n,c)}),i}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}r.wrap=f;var m="suspendedStart",h="suspendedYield",y="executing",v="completed",g={};function b(){}function w(){}function x(){}var E={};d(E,s,(function(){return this}));var C=Object.getPrototypeOf,L=C&&C(C(O([])));L&&L!==o&&i.call(L,s)&&(E=L);var T=x.prototype=b.prototype=Object.create(E);function k(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function I(e,n){function r(o,a,c,s){var u=p(e[o],e,a);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==t(d)&&i.call(d,"__await")?n.resolve(d.__await).then((function(t){r("next",t,c,s)}),(function(t){r("throw",t,c,s)})):n.resolve(d).then((function(t){l.value=t,c(l)}),(function(t){return r("throw",t,c,s)}))}s(u.arg)}var o;a(this,"_invoke",{value:function(t,e){function i(){return new n((function(n,o){r(t,e,n,o)}))}return o=o?o.then(i,i):i()}})}function _(t,e,r){var o=m;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:n,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var s=N(c,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===m)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=y;var u=p(t,e,r);if("normal"===u.type){if(o=r.done?v:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function N(t,e){var r=e.method,o=t.iterator[r];if(o===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=n,N(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=p(o,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,g;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,g):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function O(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function t(){for(;++o<e.length;)if(i.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=n,t.done=!0,t};return a.next=a}}throw new TypeError(t(e)+" is not iterable")}return w.prototype=x,a(T,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:w,configurable:!0}),w.displayName=d(x,l,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,d(t,l,"GeneratorFunction")),t.prototype=Object.create(T),t},r.awrap=function(t){return{__await:t}},k(I.prototype),d(I.prototype,u,(function(){return this})),r.AsyncIterator=I,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new I(f(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(T),d(T,l,"Generator"),d(T,s,(function(){return this})),d(T,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},r.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,o){return c.type="throw",c.arg=t,e.next=r,o&&(e.method="next",e.arg=n),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),g}},r}function n(t,e,n,r,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function r(t){return function(){var e=this,r=arguments;return new Promise((function(o,i){var a=t.apply(e,r);function c(t){n(a,o,i,c,s,"next",t)}function s(t){n(a,o,i,c,s,"throw",t)}c(void 0)}))}}var o=0;function i(){console.log("Extension context invalidated, attempting to reconnect..."),o<3?(o++,console.log("Reconnection attempt ".concat(o,"/").concat(3)),chrome.runtime.sendMessage({type:"PING"},(function(t){chrome.runtime.lastError?(console.error("Reconnection failed:",chrome.runtime.lastError),setTimeout(i,1e3)):(console.log("Reconnection successful"),o=0,a=!0,m())}))):console.error("Max reconnection attempts reached")}window.addEventListener("error",(function(t){t.error&&t.error.message&&t.error.message.includes("Extension context invalidated")&&i()})),console.log("🚀 Content script loading...",{url:window.location.href,timestamp:(new Date).toISOString(),title:document.title,host:window.location.host,protocol:window.location.protocol}),console.log("Page context validation:",{isActualWebPage:"http:"===window.location.protocol||"https:"===window.location.protocol,documentState:document.readyState,bodyExists:!!document.body});var a=!1,c=0,s=3,u=1e3,l=5e3,d=null,f={isConnected:!1,lastHeartbeat:null,reconnecting:!1,lastError:null,retryCount:0};function p(t){f.lastError=t,f.isConnected=!1,console.error("Connection error:",t),f.retryCount<s?(f.reconnecting=!0,setTimeout(y,u),f.retryCount++):(f.reconnecting=!1,console.error("Max retry attempts reached"))}function m(){d&&clearInterval(d),d=setInterval((function(){f.isConnected&&chrome.runtime.sendMessage({type:"HEARTBEAT"},(function(t){!chrome.runtime.lastError&&t&&t.success?(f.lastHeartbeat=Date.now(),console.debug("💓 Heartbeat successful")):(console.warn("❌ Heartbeat failed, connection may be lost"),function(){if(!f.reconnecting){f.reconnecting=!0,f.isConnected=!1;var t=function(){var n=r(e().mark((function n(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y();case 3:f.isConnected=!0,f.reconnecting=!1,console.log("🔄 Connection restored"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("❌ Reconnection failed:",e.t0),c<s?(c++,setTimeout(t,u)):(console.error("❌ Max reconnection attempts reached"),h(),a=!1);case 12:case"end":return e.stop()}}),n,null,[[0,8]])})));return function(){return n.apply(this,arguments)}}();t()}}())}))}),l)}function h(){d&&(clearInterval(d),d=null)}function y(){return v.apply(this,arguments)}function v(){return(v=r(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){try{f.retryCount=0,f.lastError=null,f.reconnecting=!1,(o=document.createElement("style")).id="qa-cursor-styles",o.textContent="\n        #qa-mouse-cursor {\n            position: fixed !important;\n            width: 32px !important;\n            height: 32px !important;\n            background: rgba(255, 64, 129, 0.7) !important;\n            border: 2px solid #fff !important;\n            border-radius: 50% !important;\n            pointer-events: none !important;\n            z-index: 2147483647 !important;\n            transform: translate(-50%, -50%) !important;\n            transition: all 0.3s cubic-bezier(0.165, 0.84, 0.44, 1) !important;\n            box-shadow: 0 0 0 2px rgba(255, 64, 129, 0.3),\n                        0 0 8px rgba(255, 64, 129, 0.5) !important;\n            display: block !important;\n            visibility: visible !important;\n            opacity: 1 !important;\n            mix-blend-mode: screen !important;\n            animation: cursorPulse 2s infinite !important;\n            left: 50% !important;\n            top: 50% !important;\n        }\n\n        #qa-mouse-cursor::after {\n            content: '' !important;\n            position: absolute !important;\n            width: 8px !important;\n            height: 8px !important;\n            background: #fff !important;\n            border-radius: 50% !important;\n            top: 50% !important;\n            left: 50% !important;\n            transform: translate(-50%, -50%) !important;\n            box-shadow: 0 0 4px rgba(255, 255, 255, 0.8) !important;\n        }\n\n        @keyframes cursorPulse {\n            0% { transform: translate(-50%, -50%) scale(1); }\n            50% { transform: translate(-50%, -50%) scale(1.2); }\n            100% { transform: translate(-50%, -50%) scale(1); }\n        }\n    ",document.getElementById("qa-cursor-styles")||document.head.appendChild(o);var n=document.createElement("div");n.id="qa-mouse-cursor",document.body.appendChild(n);var r=setTimeout((function(){p(new Error("Connection attempt timed out")),e(new Error("Connection attempt timed out"))}),5e3);chrome.runtime.sendMessage({type:"PING"},(function(n){if(clearTimeout(r),chrome.runtime.lastError){var o=new Error("Could not establish connection. "+chrome.runtime.lastError.message);return p(o),void e(o)}if(n&&n.success)f.isConnected=!0,f.lastHeartbeat=Date.now(),t();else{var i=new Error("Could not establish connection. Receiving end does not exist.");p(i),e(i)}}))}catch(t){p(t),e(new Error("Could not establish connection. "+t.message))}var o})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}chrome.runtime.onMessage.addListener((function(t,n,o){if(console.log("📨 Content script received message:",t.type),"PING"===t.type)return console.log("🏓 Responding to ping"),f.lastHeartbeat=Date.now(),o({success:!0,message:"Content script is active"}),!0;if("HEARTBEAT"===t.type)return f.lastHeartbeat=Date.now(),o({success:!0,timestamp:Date.now()}),!0;if("ACTIVATE_CONTROL"===t.type){console.log("🎮 Attempting to activate tab control");var i=function(){var t=r(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y();case 3:a=!0,c=0,f.isConnected=!0,m(),o({success:!0}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),c<s?(c++,console.log("Retrying connection (".concat(c,"/").concat(s,")...")),setTimeout(i,u)):(console.error("Failed to establish connection after retries"),f.isConnected=!1,o({success:!1,error:"Connection failed after retries"}));case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}();return i(),!0}if("DEACTIVATE_CONTROL"===t.type){a=!1,f.isConnected=!1,h();var l=document.getElementById("qa-mouse-cursor");return l&&l.remove(),o({success:!0}),!0}return a&&f.isConnected?"mouse_move_coords"===t.type?(function(t,e){try{var n=document.getElementById("qa-mouse-cursor");if(!n)return void e({success:!1,error:"Cursor not found"});var r=t.data.x,o=t.data.y;n.style.left="".concat(r,"px"),n.style.top="".concat(o,"px"),setTimeout((function(){e({success:!0})}),300)}catch(t){console.error("Error moving cursor:",t),e({success:!1,error:t.message})}}(t,o),!0):"HIDE_MOUSE"===t.type?(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.log("%c[QA Assistant] ".concat(t),"background: #FF4081; color: white; padding: 2px 5px; border-radius: 3px;",e)}("Cleaning up cursor"),function(){var t=document.getElementById("qa-mouse-cursor");t&&t.remove();var e=document.getElementById("qa-cursor-styles");e&&e.remove()}(),o({success:!0}),!0):"LOCATE_ELEMENT"===t.type?(function(t,e){try{var n=null;if(t.data.section&&t.data.itemIndex)n=x(t.data.section,t.data.itemIndex);else if(t.data.section)n=x(t.data.section);else{var r=w(t.data.text,document.body,t.data.type);n=r[0]}n?function(t){return new Promise((function(e){if(t){var n=t.getBoundingClientRect();n.top>=0&&n.left>=0&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&n.right<=(window.innerWidth||document.documentElement.clientWidth)?e(!0):(t.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout((function(){return e(!0)}),500))}else e(!1)}))}(n).then((function(){b.show(n),e({success:!0,element:{tagName:n.tagName,text:n.textContent.trim(),type:n.getAttribute("role")||n.tagName.toLowerCase(),rect:n.getBoundingClientRect()}})})):e({success:!1,error:"Element not found"})}catch(t){console.error("Element location failed:",t),e({success:!1,error:t.message})}}(t,o),!0):"HIDE_HIGHLIGHT"===t.type?(b.hide(),o({success:!0}),!0):"click"===t.type?(console.log("Handling click command for:",t.text),(d=t.text,new Promise((function(t,e){if(a){console.log("🔍 Finding element with text:",d);var n=Array.from(document.querySelectorAll('a, button, [role="button"], input[type="submit"], input[type="button"], [tabindex]:not([tabindex="-1"]), [onclick], [role="link"], [role="tab"], [role="menuitem"], .clickable, [data-testid*="button"], [data-testid*="link"]')),r=n.find((function(t){var e=(t.textContent||"").toLowerCase().trim(),n=(t.value||"").toLowerCase().trim(),r=(t.getAttribute("aria-label")||"").toLowerCase().trim(),o=(t.getAttribute("title")||"").toLowerCase().trim(),i=d.toLowerCase().trim();return e===i||n===i||r===i||o===i}));if(r||(r=n.find((function(t){var e=(t.textContent||"").toLowerCase().trim(),n=(t.value||"").toLowerCase().trim(),r=(t.getAttribute("aria-label")||"").toLowerCase().trim(),o=d.toLowerCase().trim();return e.includes(o)||n.includes(o)||r.includes(o)}))),r){var o=r.getBoundingClientRect();0!==o.width&&0!==o.height?(r.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout((function(){r.dispatchEvent(new MouseEvent("mouseover",{bubbles:!0})),setTimeout((function(){r.click(),t(!0)}),100)}),500)):e(new Error("Element is not visible"))}else e(new Error("Could not find element with text: ".concat(d)))}else e(new Error("Tab control not established. Please ensure the extension is properly connected."))}))).then((function(){return o({success:!0})})).catch((function(t){console.error("Click error:",t),o({success:!1,error:t.message})})),!0):void 0:(o({success:!1,error:"Tab not controlled or connection lost"}),!0);var d}));var g,b=(g=null,{show:function(t){var e=(g||((g=document.createElement("div")).style.position="absolute",g.style.border="2px solid #2196f3",g.style.backgroundColor="rgba(33, 150, 243, 0.1)",g.style.zIndex="10000",g.style.pointerEvents="none",g.style.transition="all 0.3s ease-in-out",g.style.borderRadius="4px",g.style.boxShadow="0 0 0 4px rgba(33, 150, 243, 0.2)",document.body.appendChild(g)),g),n=t.getBoundingClientRect();e.style.top="".concat(n.top+window.scrollY,"px"),e.style.left="".concat(n.left+window.scrollX,"px"),e.style.width="".concat(n.width,"px"),e.style.height="".concat(n.height,"px"),e.style.display="block"},hide:function(){g&&(g.style.display="none")}});function w(t){for(var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=[],i=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:function(e){if(!e.textContent.toLowerCase().includes(t.toLowerCase()))return NodeFilter.FILTER_SKIP;if(r)switch(r.toLowerCase()){case"button":if(!e.matches('button, [role="button"], [type="button"]'))return NodeFilter.FILTER_SKIP;break;case"link":if(!e.matches('a, [role="link"]'))return NodeFilter.FILTER_SKIP;break;case"tab":if(!e.matches('[role="tab"], .tab, [data-tab]'))return NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_ACCEPT}});e=i.nextNode();)o.push(e);return o}function x(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=w(t);if(!n.length)return null;var r=n[0];return null===e?r:r.querySelectorAll('a, button, [role="button"], [tabindex]')[e-1]||null}})();